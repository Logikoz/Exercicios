#include <stdlib.h>
#include <stdio.h>

#define Max 2

void MostrarMatriz(float M[Max][Max]){
	int i, j;
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			printf("%.4f\t", M[i][j]);
		}
		printf("\n");
	}
}

void MostrarVetor(float V[Max]){
	int i;
	for(i = 0; i < Max; i++){
		printf("%.4f\n", V[i]);
	}
}

void MultiplicarMatrizPorVetor(float A[Max][Max], float vetor[Max], float saida[Max]) {
	int i, j;
	float aux[Max];
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			aux[j] = A[i][j] * vetor[j];
		}
		saida[i] = aux[0] + aux[1];
	}
}

void CalcularDetA(float A[Max][Max], float *detA){
	float aux[Max];
	aux[0] = A[0][0] * A[1][1];
	aux[1] = A[0][1] * A[1][0];
	*detA = aux[0] - aux[1];
}

void CalcularInversaA(float A[Max][Max], float _A[Max][Max], float vetor_b[]){
	int i, j;
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){			
			if(i == j)
				_A[i][j] = (i == 0) ? A[i+1][j+1] : A[i-1][j-1];
			else
				_A[i][j] = A[i][j] * -1;
		}
	}
}

void CalcularX(float _A[Max][Max], float b[Max][Max], float X[Max], float *detA){
	int i, j;
	float aux[Max][Max];
	//fazendo a multiplicaÃ§ao do determinante pela matriz inversa.
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			aux[i][j] = _A[i][j] * (1.0 / *detA);
		}
	}
	printf("\nDetA * Inversa A: \n");
	MostrarMatriz(aux);
	MultiplicarMatrizPorVetor(aux, b, X);
}

void main(){

	float A[Max][Max];// = { { 3.1424, 2.6474}, {-1.3456, 2.1234} };
	float _A[Max][Max];
	float b[];// = { 1, 2 };

	float X[Max];
	
	float detA;
	
	printf("\nMatriz A: \n");
	MostrarMatriz(A);
	
	printf("\nVetor b: \n");
	MostrarVetor(b);
	
	CalcularDetA(A, &detA);
	printf("\nDeterminante: %.4f\n", detA);
	
	CalcularInversaA(A, _A, &detA);
	printf("\nMatriz inversa A: \n");
	MostrarMatriz(_A);
	
	CalcularX(_A, b, X, &detA);
	printf("\nVetor X: \n");
	MostrarVetor(X);
	

	//================================================
	printf("\n\n\n");
	system("pause");
	system("cls");
}
