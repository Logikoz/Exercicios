#include <stdlib.h>
#include <stdio.h>

#define Max 2

void MostrarMatriz(float M[Max][Max]){
	int i, j;
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			printf("%.4f\t", M[i][j]);
		}
		printf("\n");
	}
}

void MostrarVetor(float V[Max]){
	int i;
	for(i = 0; i < Max; i++){
		printf("%.4f\n", V[i]);
	}
}

void MultiplicarMatrizPorVetor(float A[Max][Max], float vetor[Max], float saida[Max]) {
	int i, j;
	float aux[Max];
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			aux[j] = A[i][j] * vetor[j];
		}
		saida[i] = aux[0] + aux[1];
	}
}

void CalcularDetA(float A[Max][Max], float *detA){
	float aux[Max];
	aux[0] = A[0][0] * A[1][1];
	aux[1] = A[0][1] * A[1][0];
	*detA = aux[0] - aux[1];
}

void CalcularInversaA(float A[Max][Max], float _A[Max][Max], float vetor_b[]){
	int i, j;
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){			
			if(i == j)
				_A[i][j] = (i == 0) ? A[i+1][j+1] : A[i-1][j-1];
			else
				_A[i][j] = A[i][j] * -1;
		}
	}
}

void CalcularX(float _A[Max][Max], float b[Max][Max], float X[Max], float *detA){
	int i, j;
	float aux[Max][Max];
	//fazendo a multiplicaçao do determinante pela matriz inversa.
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			aux[i][j] = _A[i][j] * (1.0 / (float)*detA);
		}
	}
	printf("\nDetA * Inversa A: \n");
	MostrarMatriz(aux);
	MultiplicarMatrizPorVetor(aux, b, X);
}

void IniciarValores(float A[Max][Max], float b[Max]){
	int i, j;
	printf("=-=-=-=-=-= Valores da matriz =-=-=-=-=-=\n");
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			printf("Informe o elemento (%i,%i): ", i, j);
			scanf("%f", &A[i][j]);
		}
	}
	printf("\n\n=-=-=-=-=-= Valores do vetor =-=-=-=-=-=\n");
	for(i = 0; i < Max; i++){
		printf("Informe o elemento (%i): ", i);
		scanf("%f", &b[i]);
	}
	system("cls");
}

unsigned short int VerificarMatrizNulo(float A[Max][Max]){
	int i, j;
	for(i = 0; i < Max; i++){
		for(j = 0; j < Max; j++){
			if(A[i][j] != 0)
				return 0;
		}
	}
	return 1;
}

void main(){
	//matriz informada pelo usuario
	float A[Max][Max];// = { { 3.1424, 2.6474}, {-1.3456, 2.1234} };
	//matriz inversa da matriz informada pelo usuario
	float _A[Max][Max];
	//vetor informado pelo usuario.
	float b[Max];// = { 1, 2 };
	//soluçao do sistema linear
	float X[Max];
	//determinante da matriz informada pelo usuario
	float detA;
	//iniciando os valores da matriz e vetor
	IniciarValores(A, b);
	//
	if(VerificarMatrizNulo(A))
	{
		printf("Matriz informada eh nula.");
		return;
	}
	//mostrando dados
	printf("\nMatriz A: \n");
	MostrarMatriz(A);
	printf("\nVetor b: \n");
	MostrarVetor(b);
	//calculando determinante da matriz A e mostrando o seu valor.
	CalcularDetA(A, &detA);
	printf("\nDeterminante: %.4f\n", detA);
	//Calculando inversa da matriz A e mostrando o seu valor.
	CalcularInversaA(A, _A, &detA);
	printf("\nMatriz inversa A: \n");
	MostrarMatriz(_A);
	//Calculando a soluçao do sistema linear e mostrando o seu valor.
	CalcularX(_A, b, X, &detA);
	printf("\nVetor X: \n");
	MostrarVetor(X);
	
	//================================================
	printf("\n\n\n");
	system("pause");
	system("cls");
}
